import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import { ComponentStory, ComponentMeta } from '@storybook/react';
import pkg from '../../package.json';
import Wizard from './wizard';
import { useState } from 'react';

<Meta title="Wizard" component={Wizard} />

# Wizard <img src={`https://img.shields.io/badge/Version-v${pkg.version}-brightgreenn`} />

Use this component for currency inputs

### Installation

First install the latest version of the package from `@novatics-ui/wizard`.

```bash
yarn add @novatics-ui/wizard

```

### Dependencies

This component extends some [Material UI](https://mui.com/material-ui/getting-started/overview/) components. Therefore is needed to install Material UI:

```bash
yarn add @mui/material @emotion/react @emotion/styled
```

<!--Todo: make steps array reusable-->
<!--Todo: adjust complete step logic -->
<!--Todo: style components override -->
<!--Todo: consoleErrors -->

### Basic Usage

<Canvas>
  <Story name="Basic Usage">
    {(args) => {
      const steps = [
        {
          title: '01. Select campaign settings',
          subtitle: 'Subtitle',
          content: `For each ad campaign that you create, you can control how much
you're willing to spend on clicks and conversions, which networks
and geographical locations you want your ads to show on, and more.`,
          disabled: false,
        },
        {
          title: '02. Create an ad group',
          subtitle: 'You can write some cool information stuff here',
          content: `Small text content`,
          disabled: false,
        },
        {
          title: '03. Create an ad',
          subtitle: 'Subtitle',
          content: `Try out different ad text to see what brings in the most customers,
and learn how to enhance your ads using features like ad extensions.
If you run into any problems with your ads, find out how to tell if
they're running and how to resolve approval issues.`,
          disabled: false,
        },
      ];
      return (
        <div style={{ display: 'flex', flexDirection: 'row' }}>
          <Wizard steps={steps} />
        </div>
      );
    }}
  </Story>
</Canvas>

```tsx
import Wizard from '@novatics-ui/wizard';
<Wizard steps={[]} />;
```

### Linear

<Canvas>
  <Story name="Linear">
    {(args) => {
      const steps = [
        {
          title: '01. Select campaign settings',
          subtitle: 'Subtitle',
          content: `For each ad campaign that you create, you can control how much
you're willing to spend on clicks and conversions, which networks
and geographical locations you want your ads to show on, and more.`,
          disabled: false,
        },
        {
          title: '02. Create an ad group',
          subtitle: 'You can write some cool information stuff here',
          content: `Small text content`,
          status: 'completed',
          disabled: false,
        },
        {
          title: '03. Create an ad',
          subtitle: 'Subtitle',
          content: `Try out different ad text to see what brings in the most customers,
and learn how to enhance your ads using features like ad extensions.
If you run into any problems with your ads, find out how to tell if
they're running and how to resolve approval issues.`,
          disabled: false,
        },
      ];
      return (
        <div style={{ display: 'flex', flexDirection: 'row' }}>
          <Wizard steps={steps} isLinear />
        </div>
      );
    }}
  </Story>
</Canvas>

The `isLinear` prop defines whether the tabs will navigate in a linear way or not:

```tsx
import Wizard from '@novatics-ui/wizard';

<Wizard steps={[]} isLinear />;
```

### Show Completed

<Canvas>
  <Story name="Show Completed">
    {(args) => {
      const initialSteps = [
        {
          id: 1,
          title: '01. Select campaign settings',
          subtitle: 'Subtitle',
          content: `For each ad campaign that you create, you can control how much
you're willing to spend on clicks and conversions, which networks
and geographical locations you want your ads to show on, and more.`,
          disabled: false,
        },
        {
          id: 2,
          title: '02. Create an ad group',
          subtitle: 'You can write some cool information stuff here',
          content: `Small text content`,
          disabled: false,
        },
        {
          id: 3,
          title: '03. Create an ad',
          subtitle: 'Subtitle',
          content: `Try out different ad text to see what brings in the most customers,
and learn how to enhance your ads using features like ad extensions.
If you run into any problems with your ads, find out how to tell if
they're running and how to resolve approval issues.`,
          disabled: false,
        },
      ];
      const [steps, setSteps] = useState(initialSteps);
      const completeStep = (id) => {
        setSteps((value) =>
          value.map((step) =>
            step.id === id ? { ...step, status: 'completed' } : step
          )
        );
      };
      return (
        <div style={{ display: 'flex', flexDirection: 'row' }}>
          <Wizard
            onNext={(stepIndex) => completeStep(stepIndex + 1)}
            steps={steps}
            showCompleted
          />
        </div>
      );
    }}
  </Story>
</Canvas>

The `showCompleted` prop defines whether the tab will show a checkmark when a step is completed or not.

To set a step completed, we have to set the value of `status` key inside `steps` to `'completed'`:

```tsx
import Wizard from '@novatics-ui/wizard';
import { useState } from 'react';

const [steps, setSteps] = useState(initialSteps);
const completeStep = (id) => {
  setSteps((value) =>
    value.map((step) =>
      step.id === id ? { ...step, status: 'completed' } : step
    )
  );
};

<Wizard
  onNext={(stepIndex) => completeStep(stepIndex + 1)}
  steps={[]}
  showCompleted
/>;
```

### Components Override

<Canvas>
  <Story name="Components Override">
    {(args) => {
      const steps = [
        {
          title: '01. Select campaign settings',
          subtitle: 'Subtitle',
          content: `For each ad campaign that you create, you can control how much
                    you're willing to spend on clicks and conversions, which networks
                    and geographical locations you want your ads to show on, and more.`,
          disabled: false,
          components: {
            Tab: () => <div>Individual Tab</div>,
            Header: () => <div>Individual header</div>,
            Content: () => <div>Individual content</div>,
            Footer: () => <div>Individual footer</div>,
          },
        },
        {
          title: '02. Create an ad group',
          subtitle: 'You can write some cool information stuff here',
          content: 'Name',
          status: 'completed',
          disabled: false,
        },
        {
          title: '03. Create an ad',
          subtitle: 'Subtitle',
          content: `Try out different ad text to see what brings in the most customers,
                    and learn how to enhance your ads using features like ad extensions.
                    If you run into any problems with your ads, find out how to tell if
                    they're running and how to resolve approval issues.`,
          disabled: false,
        },
      ];
      return (
        <div style={{ display: 'flex', flexDirection: 'row' }}>
          <Wizard
            steps={steps}
            HeaderOverride={() => <div>Header</div>}
            ContentOverride={() => <div>Content</div>}
            FooterOverride={() => <div>Footer</div>}
          />
        </div>
      );
    }}
  </Story>
</Canvas>

It is possible to override the whole Wizard component by using the following props:

```tsx
import Wizard from '@novatics-ui/wizard';

<Wizard
  steps={steps}
  TabOverride={() => <div>Tab</div>}
  HeaderOverride={() => <div>Header</div>}
  ContentOverride={() => <div>Content</div>}
  FooterOverride={() => <div>Footer</div>}
/>;
```

We can also override components for individual tabs by using the `components` key inside `steps` array:

```tsx
import Wizard from '@novatics-ui/wizard';

const steps = [
  {
    title: '01. Select campaign settings',
    subtitle: 'Subtitle',
    content: `...`,
    disabled: false,
    components: {
      Tab: () => <div>Individual Tab</div>,
      Header: () => <div>Individual Header</div>,
      Content: () => <div>Individual Content</div>,
      Footer: () => <div>Individual Footer</div>,
    },
  },
];

<Wizard steps={steps} />;
```

### Disabled Tab

<Canvas>
  <Story name="Disabled Tab">
    {(args) => {
      const steps = [
        {
          id: 1,
          title: '01. Select campaign settings',
          subtitle: 'Subtitle',
          content: `For each ad campaign that you create, you can control how much
you're willing to spend on clicks and conversions, which networks
and geographical locations you want your ads to show on, and more.`,
          disabled: false,
        },
        {
          id: 2,
          title: '02. Create an ad group',
          subtitle: 'You can write some cool information stuff here',
          content: `Small text content`,
          disabled: false,
        },
        {
          id: 3,
          title: '03. Create an ad',
          subtitle: 'Subtitle',
          content: `Try out different ad text to see what brings in the most customers,
and learn how to enhance your ads using features like ad extensions.
If you run into any problems with your ads, find out how to tell if
they're running and how to resolve approval issues.`,
          disabled: true,
        },
      ];
      return (
        <div style={{ display: 'flex', flexDirection: 'row' }}>
          <Wizard steps={steps} />
        </div>
      );
    }}
  </Story>
</Canvas>

The `disabled` key inside `steps` array allows individual tabs to be disabled:

```tsx
import Wizard from '@novatics-ui/wizard';

const steps = [
  {
    title: '03. Create an ad',
    subtitle: 'Subtitle',
    content: `...`,
    disabled: true,
  },
];

<Wizard steps={steps} />;
```

### Playground

<Canvas>
  <Story
    argTypes={{
      onNext: { description: "Input's onChange method." },
    }}
    name="Playground"
  >
    {(args) => {
      return (
        <div style={{ display: 'flex', flexDirection: 'row' }}>
          <Wizard
            onNext={() => {}}
            onBack={() => {}}
            onFinish={() => {}}
            steps={[
              {
                title: '03. Create an ad',
                subtitle: 'You can write some cool information stuff here',
                content: `Try out different ad text to see what brings in the most customers,
and learn how to enhance your ads using features like ad extensions.
If you run into any problems with your ads, find out how to tell if
they're running and how to resolve approval issues.`,
                disabled: false,
              },
            ]}
            {...args}
          />
        </div>
      );
    }}
  </Story>
</Canvas>

<ArgsTable story="Playground" />
