import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import pkg from '../../package.json';
import { CurrencyNames } from '../currency/currency';
import { CurrencyTextField } from './currency-text-field';

<Meta title="Currency Textfield" component={CurrencyTextField} />

# CurrencyTextField <img src={`https://img.shields.io/badge/Version-v${pkg.version}-brightgreenn`} />

Use this component for currency inputs

### Installation

First install the latest version of the package from `@novatics/currency-text-field`.

```bash
yarn add @novatics/currency-text-field
```

### Dependencies

This component extends [Material UI React Text Field](https://mui.com/material-ui/react-text-field). Therefore is needed to install Material UI:

```bash
yarn add @mui/material @emotion/react @emotion/styled
```

### Basic Usage

<Canvas>
  <Story name="Basic Usage">
    {(args) => {
      return (
        <div style={{ display: 'flex', flexDirection: 'row' }}>
          <CurrencyTextField
            value={123456}
            onChange={() => {
              /* setup on change */
            }}
            {...args}
          />
        </div>
      );
    }}
  </Story>
</Canvas>

```tsx
import CurrencyTextField from '@novatics/currency-text-field';

<CurrencyTextField
  value={123456}
  onChange={() => {
    /* setup on change */
  }}
/>;
```

### Currency Preset

<Canvas>
  <Story name="Currency Preset">
    {(args) => {
      return (
        <div style={{ display: 'flex', flexDirection: 'row' }}>
          <CurrencyTextField
            value={123456}
            currency="aud"
            onChange={() => {
              /* setup on change */
            }}
            {...args}
          />
        </div>
      );
    }}
  </Story>
</Canvas>

The currency preset implements the default currency values.

For example:

```tsx
  aud: {
    symbol: '$',
    precision: 2,
    symbolFirst: true,
    htmlEntity: '$',
    decimal: '.',
    separator: ',',
  },
```

Check the list of available presets and their values:

[ISO Currency](https://github.com/Novatics/novatics/blob/dojo/NUI-15-masked-inputs/packages/currency-text-field/src/currency/currency_iso.ts)

[NON_ISO Currency](https://github.com/Novatics/novatics/blob/dojo/NUI-15-masked-inputs/packages/currency-text-field/src/currency/currency_non_iso.ts)

### Custom Props

<Canvas>
  <Story name="Custom Props">
    {(args) => {
      return (
        <div style={{ display: 'flex', flexDirection: 'row' }}>
          <CurrencyTextField
            value={1234567}
            currency="aud"
            currencyProps={{
              decimal: '_',
              precision: 3,
              separator: '-',
              symbol: '(^.^)',
              symbolFirst: false,
            }}
            onChange={() => {
              /* setup on change */
            }}
            {...args}
          />
        </div>
      );
    }}
  </Story>
</Canvas>

This component implements [CurrencyJs Lib](https://currency.js.org/)

Its possible to override any/all of this props in 'currencyProps':

```tsx
['precision', 'decimal', 'separator', 'symbol', 'symbolFirst', 'useVedic'];
```

### Playground

<Canvas>
  <Story
    name="Playground"
    argTypes={{
      onChange: { description: "Input's onChange method." },
      value: { description: "Input's initial value." },
      outputFormat: {
        description:
          "Format type returned on onChange Method. 'string' -> masked value, as shown. 'float' -> unmasked number. 'integer' -> unmasked number without the decimal part.",
      },
      currency: {
        description:
          "Preset values of 'precision', 'decimal', 'separator', 'symbol'  'symbolFirst' and 'useVedic' based on currency code.",
      },
      currencyProps: { description: 'Props from currency.js library.' },
    }}
  >
    {(args) => {
      return (
        <div style={{ display: 'flex', flexDirection: 'row' }}>
          <CurrencyTextField {...args} />
        </div>
      );
    }}
  </Story>
</Canvas>

<ArgsTable story="Playground" />
