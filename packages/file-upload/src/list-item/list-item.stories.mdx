import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import { Stack, Box } from '@mui/material';
import pkg from '../../package.json';
import { ListItem } from './';

<Meta title="Components/File Upload/ListItem" component={ListItem} />

# ListItem <img src={`https://img.shields.io/badge/Version-v${pkg.version}-brightgreenn`} />

### Installation

First install the latest version of the package from `@novatics-ui/file-upload`.

```bash
yarn add @novatics-ui/file-upload
```

### Basic Usage

The ListItem component is part of the FileUpload component. It can be used to show wheter a file is being uploaded, has been uploaded or has failed to upload.

<Canvas>
  <Story name="Basic Usage">
    {(args) => {
      return (
        <Stack width="50rem" spacing={2}>
          <ListItem fileName="test.txt" loadingPercentage={25} />
          <ListItem
            fileName="done.txt"
            succeeded
            onSuccessClick={() => {}}
            deleteAfterSuccess
          />
          <ListItem fileName="failed.txt" error="Upload failed." />
        </Stack>
      );
    }}
  </Story>
</Canvas>

### Progress

The ListItem uses the LinearProgress component to show the progress of the upload. The `loadingPercentage` prop is used to set the progress value and the `succeeded` prop is used to indicate that the upload has finished. Then, the `onSuccessClick` prop can be used to set a callback function to be called when the user clicks on the file name. If no `loadingPercentage` is passed, the component will render a indeterminated progress.

<Canvas>
  <Story name="Progress">
    {(args) => {
      return (
        <Stack width="50rem" spacing={2}>
          <ListItem fileName="determinated.txt" loadingPercentage={25} />
          <ListItem fileName="indeterminated.txt" />
          <ListItem
            fileName="success.pdf"
            succeeded
            onSuccessClick={() => {}}
          />
        </Stack>
      );
    }}
  </Story>
</Canvas>

### Icons

The ListItem can exhibit different icons depending on the filename. A personalized icon can also be passed to the component by using the `fileIcon` prop. If a URL is passed to the `imagePreview` prop, the component will render an image instead of an icon.

<Canvas>
  <Story name="Icons">
    {(args) => {
      return (
        <Stack width="50rem" spacing={2}>
          <ListItem fileName="icon.pdf" loadingPercentage={25} />
          <ListItem fileName="icon.png" loadingPercentage={50} />
          <ListItem fileName="icon.xslx" loadingPercentage={75} />
          <ListItem
            fileName="image.png"
            imagePreview="https://images.unsplash.com/photo-1557180295-76eee20ae8aa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=880&q=80"
            succeeded
            onSuccessClick={() => {}}
            deleteAfterSuccess
          />
        </Stack>
      );
    }}
  </Story>
</Canvas>

### Error

The error state can be set by passing the `error` prop. The `onRetry` prop can be used to set a callback function to be called when the user clicks on the retry button.

<Canvas>
  <Story name="Error">
    {(args) => {
      return (
        <Stack width="50rem" spacing={2}>
          <ListItem fileName="error.pdf" error="The error shows here." />
        </Stack>
      );
    }}
  </Story>
</Canvas>

### Playground

<Canvas>
  <Story name="Playground" argTypes={{}}>
    {(args) => {
      return (
        <Box width="50rem">
          <ListItem {...args} />
        </Box>
      );
    }}
  </Story>
</Canvas>

<ArgsTable story="Playground" />
