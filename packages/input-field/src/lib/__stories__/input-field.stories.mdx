import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import { Formik, Field, Form } from 'formik';
import {
  Box,
  Button,
  Grid,
  Stack,
  Typography,
  InputAdornment,
  IconButton,
} from '@mui/material';
import Visibility from '@mui/icons-material/Visibility';
import Search from '@mui/icons-material/Search';

import InputField from '../input-field';
import InputFormikField from '../input-formik-field';
import { InputContainer } from './styled-components';
import { validationSchema } from './utils';
import pkg from '../../../package.json';

<Meta title="Components/InputField" component={InputField} />

# InputField <img src={`https://img.shields.io/badge/Version-v${pkg.version}-brightgreenn`} />

### Installation

First install the latest version of the package from `@novatics-ui/input-field`.

```shell
  yarn add -D @novatics-ui/input-field
```

```shell
  npm install --dev @novatics-ui/input-field
```

and use it

```tsx
import ... from '@novatics-ui/input-field';

  ...


```

### Basic Usage

<Canvas>
  <Story name="Basic Usage">
    <Stack>
      <Typography variant="h6">All states and variants</Typography>
      <Grid container spacing={2}>
        <Grid item xxs={2}>
          <Stack spacing={0}>
            <Typography variant="bodySmall">Default</Typography>
            <InputField label="label" />
          </Stack>
        </Grid>
      </Grid>
    </Stack>
  </Story>
</Canvas>

### Sizes

<Canvas>
  <Story name="Sizes">
    <Stack>
      <Typography variant="h6">All available sizes</Typography>
      <Grid container spacing={2}>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Large</Typography>
            <InputContainer>
              <InputField
                label="label"
                size="large"
                placeholder="Placeholder"
              />
            </InputContainer>
          </Stack>
        </Grid>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Medium</Typography>
            <InputContainer>
              <InputField
                label="label"
                size="medium"
                placeholder="Placeholder"
                fullWidth
              />
            </InputContainer>
          </Stack>
        </Grid>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Small</Typography>
            <InputContainer>
              <InputField
                label="label"
                size="small"
                placeholder="Placeholder"
              />
            </InputContainer>
          </Stack>
        </Grid>
      </Grid>
    </Stack>
  </Story>
</Canvas>

### Adornments

<Canvas>
  <Story name="Adornments">
    <Stack>
      <Typography variant="h6">Input Field with Adornments</Typography>
      <Grid container spacing={2}>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Icon Adornment</Typography>
            <InputContainer>
              <InputField
                label="Search"
                placeholder="Search..."
                startAdornment={
                  <InputAdornment position="start">
                    <Search />
                  </InputAdornment>
                }
              />
            </InputContainer>
          </Stack>
        </Grid>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Icon Button Adornment</Typography>
            <InputContainer>
              <InputField
                label="Password"
                placeholder="Enter your password"
                type="password"
                endAdornment={
                  <InputAdornment position="end">
                    <IconButton
                      aria-label="Toggle password visibility"
                      onClick={() => undefined}
                      onMouseDown={() => undefined}
                      edge="end"
                    >
                      <Visibility />
                    </IconButton>
                  </InputAdornment>
                }
              />
            </InputContainer>
          </Stack>
        </Grid>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Glyph Adornment</Typography>
            <InputContainer>
              <InputField
                label="Amount"
                placeholder="Enter an amount"
                startAdornment={
                  <InputAdornment position="start">$</InputAdornment>
                }
                endAdornment={
                  <InputAdornment position="end">USD</InputAdornment>
                }
              />
            </InputContainer>
          </Stack>
        </Grid>
      </Grid>
    </Stack>
  </Story>
</Canvas>

### TextArea

By using the prop 'multiline' you can use the InputField as a `textarea`. The props `minRows` and `maxRows` are also available.

<Canvas>
  <Story name="Textarea">
    <Grid container spacing={2}>
      <Grid item xxs={2}>
        <Stack spacing={0}>
          <Typography variant="bodySmall">Textarea</Typography>
          <InputField multiline minRows={2} maxRows={5} label="label" />
        </Stack>
      </Grid>
    </Grid>
  </Story>
</Canvas>

### States

<Canvas>
  <Story name="States">
    <Stack>
      <Typography variant="h6">All InputField states</Typography>
      <Grid container spacing={2}>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Default/Inactive</Typography>
            <Stack spacing={1} direction="row">
              <InputField label="label" placeholder="Placeholder" />
              <InputField label="label" />
              <InputField label="label" value="text" />
            </Stack>
          </Stack>
        </Grid>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Disabled</Typography>
            <Stack spacing={1} direction="row">
              <InputField label="label" placeholder="Placeholder" disabled />
              <InputField label="label" disabled />
              <InputField label="label" value="text" disabled />
            </Stack>
          </Stack>
        </Grid>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Read only</Typography>
            <Stack spacing={1} direction="row">
              <InputField label="label" placeholder="Placeholder" readOnly />
              <InputField label="label" readOnly />
              <InputField label="label" value="text" readOnly />
            </Stack>
          </Stack>
        </Grid>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Error</Typography>
            <Stack spacing={1} direction="row">
              <InputField
                label="label"
                placeholder="Placeholder"
                error="Some validation text"
              />
              <InputField label="label" error="Some validation text" />
              <InputField
                label="label"
                value="text"
                error="Some validation text"
              />
            </Stack>
          </Stack>
        </Grid>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">Required</Typography>
            <Stack spacing={1} direction="row">
              <InputField label="label" placeholder="Placeholder" required />
              <InputField label="label" required />
              <InputField label="label" value="text" required />
            </Stack>
          </Stack>
        </Grid>
        <Grid item xxs={4}>
          <Stack spacing={2}>
            <Typography variant="body">With hint</Typography>
            <Stack spacing={1} direction="row">
              <InputField
                label="label"
                placeholder="Placeholder"
                hint="Please fill the input"
              />
              <InputField label="label" hint="Please fill the input" />
              <InputField
                label="label"
                value="text"
                hint="Please fill long long long input"
              />
            </Stack>
          </Stack>
        </Grid>
      </Grid>
    </Stack>
  </Story>
</Canvas>

### Using Formik

We also provide a integrated component using [Field](https://formik.org/docs/api/field) from Formik!
Some default behaviors of our component are:

- Automatic label using field name. If you want to replace or hide the label you can use the label property.
- Autimatic validation if the field is required (html5 ).

<Canvas>
  <Story name="Using Formik">
    {(args) => {
      return (
        <Stack direction="row" spacing={0}>
          <Formik
            initialValues={{
              isChecked: false,
              required: false,
              toggle: false,
              checked: [],
            }}
            validationSchema={validationSchema}
            onSubmit={async (values) => {
              await new Promise((r) => setTimeout(r, 500));
              alert(JSON.stringify(values, null, 2));
            }}
          >
            {({ values, touched, validateForm }) => (
              <Form>
                <Stack spacing={1}>
                  <InputFormikField id="name" name="name" />
                  <InputFormikField
                    id="email"
                    name="email"
                    required
                    hint="Please enter your most used email"
                  />
                  <Stack direction="row" spacing={1}>
                    <Button variant="outlined" onClick={() => validateForm()}>
                      Validate
                    </Button>
                    <Button variant="contained" type="submit">
                      Submit
                    </Button>
                  </Stack>
                </Stack>
              </Form>
            )}
          </Formik>
        </Stack>
      );
    }}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Playground"
    argTypes={{
      error: false,
      checked: false,
    }}
  >
    {(args) => {
      return (
        <div>
          <InputField {...args} />
        </div>
      );
    }}
  </Story>
</Canvas>

<ArgsTable story="Playground" />

made by Novatics ❤
